<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Galos de Combate – 1v1 (Socket.IO)</title>
<style>
  :root{ --bg:#0b0f14; --panel:#101824; --muted:#6b7686; --acc:#5de4c7; --acc2:#a78bfa; --danger:#ff6b6b; --ok:#7ee787; }
  html,body{height:100%;margin:0;background:#07090d;color:#e6edf3;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased}
  .wrap{display:grid;grid-template-columns:360px 1fr;gap:16px;height:100%;padding:16px;box-sizing:border-box}
  .panel{background:linear-gradient(180deg,rgba(255,255,255,.03),transparent 40%),var(--panel);border:1px solid #1f2a3a;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:16px;display:flex;flex-direction:column}
  h1{font-size:20px;margin:0 0 4px;letter-spacing:.4px}
  .sub{color:var(--muted);font-size:12px;margin-bottom:12px}
  .selector{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:8px 0 12px}
  .card{border:1px solid #263244;border-radius:12px;padding:10px;background:rgba(255,255,255,.02);cursor:pointer;transition:.2s;position:relative}
  .card input{position:absolute;inset:0;opacity:0}
  .card.active{outline:2px solid var(--acc);box-shadow:0 0 0 6px rgba(93,228,199,.08) inset}
  .stats{display:grid;grid-template-columns:1fr 1fr;gap:6px;font-size:12px;color:#d2d9e3}
  .bar{height:6px;background:#1a2331;border-radius:999px;overflow:hidden}
  .bar > i{display:block;height:100%;background:linear-gradient(90deg,var(--acc),var(--acc2));width:50%}
  .controls{margin-top:8px;font-size:12px;color:#cbd5e1;line-height:1.5}
  .controls kbd{background:#111a28;border:1px solid #263244;border-bottom-color:#1a2434;border-radius:6px;padding:2px 6px;font:inherit}
  .btn{margin-top:12px;background:linear-gradient(180deg,#1f2a3a,#172235);border:1px solid #2b3b53;color:#e6edf3;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;letter-spacing:.3px;transition:.2s}
  .btn:hover{filter:brightness(1.1)}
  .note{font-size:11px;color:#8b9bb1;margin-top:6px}
  #gameWrap{position:relative;border-radius:16px;overflow:hidden}
  canvas{display:block;width:100%;height:100%;background:#05070c}
  .hud{position:absolute;inset:0;pointer-events:none}
  .topbar{position:absolute;left:0;right:0;top:0;padding:10px;display:flex;gap:10px;align-items:center;justify-content:center}
  .chip{pointer-events:auto;background:#0f1726;border:1px solid #223149;border-radius:999px;padding:6px 10px;font-size:12px;color:#cbd5e1;display:flex;gap:8px;align-items:center}
  .hpbar{height:10px;background:#1a2331;border-radius:8px;overflow:hidden;width:220px}
  .hpbar i{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#16a34a);width:100%}
  .hpbar.danger i{background:linear-gradient(90deg,#fb7185,#ef4444)}
  .centerMsg{position:absolute;inset:0;display:grid;place-items:center;font-weight:800;letter-spacing:.6px;font-size:46px;color:#e2e8f0;text-shadow:0 10px 40px rgba(0,0,0,.6);opacity:0;transition:.4s}
  .centerMsg.show{opacity:1}
  .footer{position:absolute;left:8px;bottom:8px;font-size:11px;color:#90a0b8}
  .badges{display:flex;gap:6px}
  .badge{background:#111a28;border:1px solid #263244;padding:3px 8px;border-radius:999px;font-size:11px;color:#bcd}
  .cdwrap{position:absolute;left:50%;transform:translateX(-50%);top:46px;display:flex;gap:10px}
  .cd{background:#0f1726;border:1px solid #223149;border-radius:8px;padding:4px 8px;font-size:12px;display:flex;align-items:center;gap:6px}
  .cd .bar{width:80px;height:6px}
  .cd .bar i{width:0;background:linear-gradient(90deg,#38bdf8,#818cf8)}
  .puhelp{position:absolute;right:10px;top:46px;background:#0f1726;border:1px solid #223149;border-radius:8px;padding:4px 8px;font-size:11px;color:#cbd5e1}
  @media (max-width: 1000px){.wrap{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="wrap">
    <aside class="panel">
      <h1>Galos de Combate – 1v1</h1>
      <div class="sub">Top-down arena | Melhor de 3 | Socket.IO</div>
      <div class="badges" aria-hidden="true">
        <div class="badge">WASD mover</div>
        <div class="badge">J atacar</div>
        <div class="badge">K habilidade</div>
        <div class="badge">R reiniciar (local)</div>
      </div>
      <h3 style="margin:14px 0 6px;font-size:14px;color:#cbd5e1">Escolha seu Galo</h3>
      <div id="selector" class="selector"></div>
      <button id="playBtn" class="btn">Começar (tenta ONLINE)</button>
      <div class="note">Abra em duas abas. Se não conectar, cai para modo local vs CPU.</div>
      <div class="controls">
        <p><strong>Controles</strong></p>
        <p><kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> movimenta • <kbd>J</kbd> ataque • <kbd>K</kbd> habilidade • <kbd>R</kbd> reinicia</p>
      </div>
    </aside>

    <main id="gameWrap" class="panel" aria-label="Arena">
      <canvas id="game" width="1280" height="720"></canvas>
      <div class="hud">
        <div class="topbar">
          <div class="chip">P1 <div class="hpbar" id="hp1"><i></i></div></div>
          <div class="chip" id="roundChip">Round 1/3</div>
          <div class="chip">CPU/Remoto <div class="hpbar danger" id="hp2"><i></i></div></div>
        </div>
        <div class="cdwrap">
          <div class="cd">Ataque <span id="cdAtkText">pronto</span> <div class="bar"><i id="cdAtk"></i></div></div>
          <div class="cd">Habilidade <span id="cdAbText">pronto</span> <div class="bar"><i id="cdAb"></i></div></div>
        </div>
        <div id="centerMsg" class="centerMsg">PRONTO?</div>
        <div class="footer">© Galos de Combate</div>
      </div>
    </main>
  </div>

<!-- Socket.IO client -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js" integrity="sha384-6i0v2o5F+2knb7vE2+q8R7n8i7gq4QmJfXNczmDuH1YStk6vAq9i5O3pWm9z9yX7" crossorigin="anonymous"></script>

<script>
// ======= Util =======
const rand=(a,b)=>Math.random()*(b-a)+a, irand=(a,b)=>Math.floor(rand(a,b));
const clamp=(v,a,b)=>Math.max(a,Math.min(b,v)), dist2=(a,b)=>{const dx=a.x-b.x,dy=a.y-b.y;return dx*dx+dy*dy};
const now=()=>performance.now();

// ======= Áudio (curto) =======
const AudioSys=(()=>{let ctx,master,sfxGain,musicGain,int;function ensure(){if(!ctx){ctx=new (window.AudioContext||window.webkitAudioContext)(); master=ctx.createGain(); master.connect(ctx.destination); sfxGain=ctx.createGain(); sfxGain.gain.value=.6; sfxGain.connect(master); musicGain=ctx.createGain(); musicGain.gain.value=.25; musicGain.connect(master);}} function beep(f=440,d=.08,t='square',v=.3){ensure(); const o=ctx.createOscillator(),g=ctx.createGain(); o.type=t;o.frequency.value=f;o.connect(g);g.connect(sfxGain);const tt=ctx.currentTime;o.start(tt);o.stop(tt+d);g.gain.value=v;g.gain.exponentialRampToValueAtTime(.0001,tt+d);} return {beep,ensure};})();

// ======= Tema =======
const THEMES=[{name:'Cripta',bgTop:'#0a0e16',accents:'#9ca3af'},{name:'Bosque Noturno',bgTop:'#0b0f14',accents:'#93c5fd'},{name:'Capela em Ruínas',bgTop:'#0a0d15',accents:'#c7d2fe'}];
let THEME=THEMES[0];

// ======= Lutadores =======
const ROOSTERS=[ /* mesmos templates */ 
  {id:'cavaleiro',name:'Galo Cavaleiro',color:'#5de4c7',accent:'#1dd6aa',hp:120,speed:2.8,range:62,atk:16,cd:260,abilityName:'Investida de Escudo',abilityCd:3600, draw:(c,x,y,d,f)=>drawKnight(c,x,y,d,f)},
  {id:'ciborgue',name:'Galo Ciborgue',color:'#a78bfa',accent:'#7c3aed',hp:95,speed:3.1,range:200,atk:10,cd:330,abilityName:'Laser Fractal',abilityCd:4200, draw:(c,x,y,d,f)=>drawCyborg(c,x,y,d,f)},
  {id:'arqueiro',name:'Galo Arqueiro',color:'#fbbf24',accent:'#f59e0b',hp:100,speed:3.2,range:240,atk:9,cd:250,abilityName:'Chuva de Flechas',abilityCd:4800, draw:(c,x,y,d,f)=>drawArcher(c,x,y,d,f)},
  {id:'samurai',name:'Galo Samurai',color:'#ef4444',accent:'#dc2626',hp:105,speed:3.6,range:60,atk:14,cd:210,abilityName:'Corte Giratório',abilityCd:3600, draw:(c,x,y,d,f)=>drawSamurai(c,x,y,d,f)},
  {id:'xama',name:'Galo Xamã',color:'#7ee787',accent:'#22c55e',hp:110,speed:2.9,range:150,atk:11,cd:320,abilityName:'Totem Curativo',abilityCd:5600, draw:(c,x,y,d,f)=>drawShaman(c,x,y,d,f)}
];
const ARENA={w:1280,h:720,wall:40};

// ======= DOM =======
const canvas=document.getElementById('game'), ctx=canvas.getContext('2d');
const selEl=document.getElementById('selector'), playBtn=document.getElementById('playBtn');
const hp1El=document.querySelector('#hp1 i'), hp2El=document.querySelector('#hp2 i');
const roundChip=document.getElementById('roundChip'), centerMsg=document.getElementById('centerMsg');
const cdAtk=document.getElementById('cdAtk'), cdAb=document.getElementById('cdAb');
const cdAtkText=document.getElementById('cdAtkText'), cdAbText=document.getElementById('cdAbText');

// ======= Estado =======
let keys={}, last=0, running=false, freeze=false, time=0, dtMs=16;
let projectiles=[], effects=[], obstacles=[], damageTexts=[], powerups=[], rainDrops=[];
let round=1, scoreP1=0, scoreCPU=0, BEST_OF=3, shakeT=0, cpuThinkT=0;
let P1, CPU, selectedId=ROOSTERS[0].id;

// ======= UI =======
function buildSelector(){ selEl.innerHTML=''; ROOSTERS.forEach((r,i)=>{ const card=document.createElement('label'); card.className='card'+(i===0?' active':''); card.innerHTML=`<input type="radio" name="r" ${i===0?'checked':''} />
  <div style="display:flex;align-items:center;gap:10px">
    <div style="width:44px;height:44px;border-radius:10px;background:${r.color};box-shadow:0 6px 16px rgba(0,0,0,.35)"></div>
    <div style="flex:1">
      <div style="font-weight:700">${r.name}</div>
      <div class="stats">
        <div>HP<div class="bar"><i style="width:${clamp(r.hp/130*100,10,100)}%"></i></div></div>
        <div>Dano<div class="bar"><i style="width:${clamp(r.atk/18*100,10,100)}%"></i></div></div>
        <div>Veloc.<div class="bar"><i style="width:${clamp(r.speed/3.7*100,10,100)}%"></i></div></div>
        <div>Alcance<div class="bar"><i style="width:${clamp(r.range/240*100,10,100)}%"></i></div></div>
      </div>
    </div>
  </div>`; card.querySelector('input').addEventListener('change',()=>{ document.querySelectorAll('.card').forEach(c=>c.classList.remove('active')); card.classList.add('active'); selectedId=r.id; if(NET.isOnline) sendSelect(selectedId); }); selEl.appendChild(card); }); }

// ======= Entidades =======
function createFighter(t,x,y,isCPU=false){return {...t,x,y,r:18,dir:0,vx:0,vy:0,hp:t.hp,maxhp:t.hp,lastAtk:-9999,lastAbility:-9999,isCPU,hurtT:0,buffs:{speed:0,damage:0,shield:0}};}
function spawnObstacles(){obstacles=[{x:ARENA.w*.5,y:ARENA.h*.5,r:38},{x:ARENA.w*.25,y:ARENA.h*.35,r:28},{x:ARENA.w*.75,y:ARENA.h*.65,r:32}]}

// ======= NET (Socket.IO) =======
const SOCKET_URL_DEFAULT = "https://SEU-SERVIDOR-AQUI"; // <- troque depois
let NET={socket:null,pid:null,connected:false,isOnline:false,seq:0,lastSnap:null};

function netConnect(url){
  try{
    NET.socket = io(url, { transports:['websocket'], path:'/socket.io', withCredentials:false });
    NET.socket.on('connect',()=>{ NET.connected=true; NET.isOnline=true; console.log('socket connected'); });
    NET.socket.on('hello',(data)=>{ NET.pid=data.pid; });
    NET.socket.on('snapshot',(snap)=>{ NET.lastSnap=snap; onSnapshot(snap); });
    NET.socket.on('full',()=>{ alert('Sala cheia.'); });
    NET.socket.on('disconnect',()=>{ NET.connected=false; NET.isOnline=false; console.log('socket closed'); });
  }catch(e){ console.warn(e); }
}
function sendInput(keys){ if(NET.connected) NET.socket.emit('input',{seq:++NET.seq,keys}); }
function sendSelect(id){ if(NET.connected) NET.socket.emit('select',{id}); }

function onSnapshot(snap){
  if(!P1||!CPU){
    const t1=ROOSTERS.find(r=>r.id===snap.P1.id)||ROOSTERS[0];
    const t2=ROOSTERS.find(r=>r.id===snap.P2.id)||ROOSTERS[1];
    P1=createFighter(t1,snap.P1.x,snap.P1.y,false);
    CPU=createFighter(t2,snap.P2.x,snap.P2.y,true);
  }
  Object.assign(P1,{x:snap.P1.x,y:snap.P1.y,hp:snap.P1.hp,dir:snap.P1.dir,id:snap.P1.id,maxhp:snap.P1.maxhp});
  Object.assign(CPU,{x:snap.P2.x,y:snap.P2.y,hp:snap.P2.hp,dir:snap.P2.dir,id:snap.P2.id,maxhp:snap.P2.maxhp});
  projectiles=snap.projectiles.map(p=>({x:p.x,y:p.y,r:p.r,color:'#e5e7eb',vx:0,vy:0,kind:p.kind,team:p.team,until:Infinity}));
  updateHud(); running=true;
}

// ======= Local-only helpers (fallback vs CPU) =======
function flashCenter(msg){ centerMsg.textContent=msg; centerMsg.classList.add('show'); setTimeout(()=>centerMsg.classList.remove('show'),900); }
function updateHud(){ if(!P1||!CPU) return; hp1El.style.width=clamp(P1.hp/P1.maxhp*100,0,100)+'%'; hp2El.style.width=clamp(CPU.hp/CPU.maxhp*100,0,100)+'%'; roundChip.textContent=`Round ${round}/${BEST_OF}`; }
function resetRound(){ projectiles.length=0; effects.length=0; spawnObstacles(); powerups=[]; const R1=ROOSTERS.find(r=>r.id===selectedId), R2=ROOSTERS[(Math.random()*ROOSTERS.length)|0]; P1=createFighter(R1,ARENA.wall+80,ARENA.h/2,false); CPU=createFighter(R2,ARENA.w-ARENA.wall-80,ARENA.h/2,true); cpuThinkT=0; updateHud(); flashCenter(`ROUND ${round}`); freeze=true; setTimeout(()=>freeze=false,900); }
function startMatch(){ round=1; scoreP1=scoreCPU=0; running=true; resetRound(); }

// ======= Input =======
addEventListener('keydown',e=>{ if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) e.preventDefault(); keys[e.key.toLowerCase()]=true; if(e.key==='r'&&!NET.isOnline) startMatch(); if(!running && e.key===' ') tryOnlineOrLocal(); });
addEventListener('keyup',e=>{ keys[e.key.toLowerCase()]=false; });

// ======= Luta (local) — encurtado =======
function applyDamage(target,amount){ target.hp=Math.max(0,target.hp-amount); target.hurtT=220; updateHud(); if(target.hp<=0) endRound(target===CPU?'P1':'CPU'); }
function doAttack(from,to){ const bonus=from.buffs.damage>0?1.35:1.0; if(from.range<=70){ const ang=Math.atan2(to.y-from.y,to.x-from.x); from.x+=Math.cos(ang)*8; from.y+=Math.sin(ang)*8; if(Math.hypot(to.x-from.x,to.y-from.y)<from.r+30) applyDamage(to,from.atk*bonus); } else { const ang=Math.atan2(to.y-from.y,to.x-from.x); projectiles.push({x:from.x+Math.cos(ang)*22,y:from.y+Math.sin(ang)*22,vx:Math.cos(ang)*5.6,vy:Math.sin(ang)*5.6,r:5,dmg:from.atk*bonus,team:from.isCPU?2:1,until:now()+1600}); } }
function endRound(w){ flashCenter(w==='P1'?'VOCÊ VENCEU!':'CPU VENCEU!'); setTimeout(()=>{ running=false; },900); }
function aiStep(){ cpuThinkT-=dtMs; if(cpuThinkT<=0){ cpuThinkT=80; const d=Math.hypot(P1.x-CPU.x,P1.y-CPU.y), ang=Math.atan2(P1.y-CPU.y,P1.x-CPU.x); CPU.vx=CPU.vy=0; if(d>CPU.range) {CPU.vx=Math.cos(ang)*CPU.speed; CPU.vy=Math.sin(ang)*CPU.speed;} else {CPU.vx=-Math.cos(ang)*CPU.speed; CPU.vy=-Math.sin(ang)*CPU.speed;} CPU.dir=ang; if(now()-CPU.lastAtk>CPU.cd && d<=CPU.range*1.05) {CPU.lastAtk=now(); doAttack(CPU,P1);} } }

// ======= Desenho dos lutadores (mesmo do seu projeto) =======
function drawBody(c,base,accent,f=0){c.fillStyle=base;c.beginPath();c.ellipse(0,0,20,16,0,0,Math.PI*2);c.fill();const fl=Math.sin(f*0.25)*3;c.fillStyle=base;c.beginPath();c.ellipse(-6,6+fl,8,5,0,0,Math.PI*2);c.fill();c.beginPath();c.ellipse(-2,-2-fl,8,5,0,0,Math.PI*2);c.fill();c.fillStyle=accent;c.beginPath();c.moveTo(-6,-16);c.quadraticCurveTo(-2,-26,4,-16);c.quadraticCurveTo(0,-24,8,-14);c.quadraticCurveTo(4,-18,2,-10);c.closePath();c.fill();c.fillStyle="#f59e0b";c.beginPath();c.moveTo(20,0);c.lineTo(30,-4);c.lineTo(22,4);c.closePath();c.fill();c.fillStyle="#0b0f14";c.beginPath();c.arc(8,-4,2.5,0,Math.PI*2);c.fill();}
function drawKnight(c,x,y,d,f){c.save();c.translate(x,y);c.rotate(d);drawBody(c,'#4cdcc1','#16c9a1',f);c.fillStyle="#bfecef";c.fillRect(-12,-20,24,6);c.fillRect(-10,-24,12,4);c.strokeStyle="#e5e7eb";c.lineWidth=4;c.beginPath();c.moveTo(6,-20);c.lineTo(36,-12);c.stroke();c.restore();}
function drawCyborg(c,x,y,d,f){c.save();c.translate(x,y);c.rotate(d);drawBody(c,'#9f91ff','#6d28d9',f);c.strokeStyle='#cbd5e1';c.strokeRect(-14,-10,28,20);c.fillStyle="#22d3ee";c.fillRect(4,-6,10,4);c.restore();}
function drawArcher(c,x,y,d,f){c.save();c.translate(x,y);c.rotate(d);drawBody(c,'#f0b91a','#d97706',f);c.strokeStyle="#8b5a2b";c.lineWidth=3;c.beginPath();c.arc(10,0,15,-1.2,1.2);c.stroke();c.restore();}
function drawSamurai(c,x,y,d,f){c.save();c.translate(x,y);c.rotate(d);drawBody(c,'#e11d48','#b91c1c',f);c.restore();}
function drawShaman(c,x,y,d,f){c.save();c.translate(x,y);c.rotate(d);drawBody(c,'#22c55e','#16a34a',f);c.restore();}

// ======= Render =======
function drawArena(px){const g=px.createLinearGradient(0,0,0,ARENA.h);g.addColorStop(0,THEME.bgTop);g.addColorStop(1,'#05070c');px.fillStyle=g;px.fillRect(0,0,ARENA.w,ARENA.h);px.strokeStyle='#223149';px.lineWidth=2;px.strokeRect(ARENA.wall,ARENA.wall,ARENA.w-ARENA.wall*2,ARENA.h-ARENA.wall*2); if(obstacles.length) obstacles.forEach(o=>{px.fillStyle='#0f1a2a';px.beginPath();px.arc(o.x,o.y,o.r,0,Math.PI*2);px.fill();px.strokeStyle='#223149';px.stroke();});}
function draw(){ if(!running) return; ctx.clearRect(0,0,canvas.width,canvas.height); const sx=shakeT>0?(Math.random()-0.5)*4:0, sy=shakeT>0?(Math.random()-0.5)*4:0; ctx.save(); ctx.translate(sx,sy); drawArena(ctx); projectiles.forEach(p=>{ctx.fillStyle=p.color||'#e5e7eb';ctx.beginPath();ctx.arc(p.x,p.y,p.r||5,0,Math.PI*2);ctx.fill();}); if(P1&&CPU){ const f=time; [P1,CPU].forEach(F=>{ ctx.save(); ROOSTERS.find(r=>r.id===F.id).draw(ctx,F.x,F.y,F.dir||0,f); ctx.restore(); }); damageTexts.forEach(d=>{ ctx.globalAlpha=d.alpha; ctx.fillStyle=d.col; ctx.font='bold 14px Inter'; ctx.textAlign='center'; ctx.fillText(d.val,d.x,d.y); ctx.globalAlpha=1; }); } ctx.restore(); }

// ======= Loop =======
function step(dt){
  if(NET.isOnline){ const send={w:!!keys['w'],a:!!keys['a'],s:!!keys['s'],d:!!keys['d'],j:!!keys['j'],k:!!keys['k']}; sendInput(send); keys['j']=false; keys['k']=false; return; }
  if(!P1||!CPU) return;
  time+=dt; // player
  const sp=P1.speed*(keys['shift']?1.25:1); let vx=(keys['d']?1:0)-(keys['a']?1:0), vy=(keys['s']?1:0)-(keys['w']?1:0); const len=Math.hypot(vx,vy)||1; vx=vx/len*sp; vy=vy/len*sp; if(vx||vy) P1.dir=Math.atan2(vy,vx); P1.x=clamp(P1.x+vx*dt,ARENA.wall,ARENA.w-ARENA.wall); P1.y=clamp(P1.y+vy*dt,ARENA.wall,ARENA.h-ARENA.wall);
  aiStep(); CPU.x=clamp(CPU.x+CPU.vx*dt,ARENA.wall,ARENA.w-ARENA.wall); CPU.y=clamp(CPU.y+CPU.vy*dt,ARENA.wall,ARENA.h-ARENA.wall);
}
function loop(t){ dtMs=last?Math.min((t-last),33):16; last=t; const dtNorm=dtMs/16; if(running&&!freeze) step(dtNorm); draw(); requestAnimationFrame(loop); }

// ======= Entrar online/local =======
function tryOnlineOrLocal(){
  AudioSys.ensure();
  const urlParam=new URLSearchParams(location.search).get('server');
  const url = urlParam || SOCKET_URL_DEFAULT; // se não trocar aqui, use ?server=...
  if(!url){ startMatch(); return; }
  netConnect(url);
  setTimeout(()=>{ if(NET.connected){ sendSelect(selectedId); flashCenter("ONLINE: aguardando snapshots..."); running=true; } else { startMatch(); } }, 800);
}

// ======= Init =======
buildSelector(); playBtn.addEventListener('click',tryOnlineOrLocal); spawnObstacles(); requestAnimationFrame(loop);
</script>
</body>
</html>
